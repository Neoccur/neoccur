<!DOCTYPE html>
<html>
  <head>
    <title>Neoccur - Sign Up</title>
    <link rel="shortcut icon" type="image/png" href="assets/images/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="assets/styles/original.css" />
    <!-- Bootstrap and font awesome CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous" />
    <!-- The JavaScript library in main.js -->
    <script src="main.js"></script>
  </head>

  <body class="sign-body">
    <nav class="NavigationBar nav-scroll" id="myNav">
      <div class="nav-links">
        <a href="index.html">Home</a>
      </div>
      <div class=" nav-link nav-logo">
        <a href="#">
          <img src="assets/images/logo.svg" alt="logo" width="50px" />
        </a>
      </div>
      <div class="nav-links">
        <div id="MenuSlide">
          <li>
            <img class="Language" src="assets/images/language.png" alt="Language" />
            <ul>
              <li onclick="languageClickEvent('en');"><img src="assets/images/flags/us.png" width="38px" height="auto" alt="EN" /></li>
              <li onclick="languageClickEvent('fr');"><img src="assets/images/flags/fr.png" width="38px" height="auto" alt="FR" /></li>
            </ul>
          </li>
        </div>
        <a href="register.php">Sign up</a>
        <a href="login.php">Log in</a>
      </div>
    </nav>
    <section>
      <div class="container">
        <div class="row">
          <div class="col-sm-12 bg-dark">
            <h1>hello</h1>
          </div>
        </div>
      </div>
    </section>

    <!-- Code injected by live-server -->
    <script type="text/javascript">
      // <![CDATA[  <-- For SVG support
      if ("WebSocket" in window) {
        (function() {
          function refreshCSS() {
            var sheets = [].slice.call(document.getElementsByTagName("link"));
            var head = document.getElementsByTagName("head")[0];
            for (var i = 0; i < sheets.length; ++i) {
              var elem = sheets[i];
              var parent = elem.parentElement || head;
              parent.removeChild(elem);
              var rel = elem.rel;
              if ((elem.href && typeof rel != "string") || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
                var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, "");
                elem.href = url + (url.indexOf("?") >= 0 ? "&" : "?") + "_cacheOverride=" + new Date().valueOf();
              }
              parent.appendChild(elem);
            }
          }
          var protocol = window.location.protocol === "http:" ? "ws://" : "wss://";
          var address = protocol + window.location.host + window.location.pathname + "/ws";
          var socket = new WebSocket(address);
          socket.onmessage = function(msg) {
            if (msg.data == "reload") window.location.reload();
            else if (msg.data == "refreshcss") refreshCSS();
          };
          if (sessionStorage && !sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")) {
            console.log("Live reload enabled.");
            sessionStorage.setItem("IsThisFirstTime_Log_From_LiveServer", true);
          }
        })();
      } else {
        console.error("Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.");
      }
      // ]]>
    </script>
    <!-- Optional JavaScript for bootstrap and font awesome-->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.1.1/js/all.js" integrity="sha384-BtvRZcyfv4r0x/phJt9Y9HhnN5ur1Z+kZbKVgzVBAlQZX4jvAuImlIz+bG7TS00a" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
<?php
   break;
   case "POST":
   
       // So, enfaite this machain chouaitte truc bidule is here to allow the authentication because si non it will be the anarchy thermo nucléaire because there is a lot of singes sur internet.
       if (isset($_POST["ClientName"]) && isset($_POST["ClientEmail"]) && isset($_POST["ClientKey"]) && isset($_POST["ClientKeyCheck"]) && $_POST["ClientName"] != "" && $_POST["ClientEmail"] != "" && $_POST["ClientKey"] != "" && $_POST["ClientKeyCheck"] != "")
       {
           $ClientNameQueryToken = MysqlClientQuery("UserName", $_POST["ClientName"], "UserToken")[0];
           $ClientEmailQueryToken = MysqlClientQuery("UserEmail", $_POST["ClientEmail"], "UserToken")[0];
   
           // On est des hackers, Ouai! Ah merde ya un système d'authentification, bon bah tampis! ... Geniuses! :D
           if (isset($ClientNameQueryToken) && $ClientNameQueryToken != "")
           {
               HttpClientRedirect("/register?error=not_available_username");
           }
           else if ($_POST["ClientKey"] != $_POST["ClientKeyCheck"])
           {
               HttpClientRedirect("/register?error=not_match_userkey");
           }
           else if (isset($ClientNameQueryToken) && $ClientNameQueryToken != "")
           {
               HttpClientRedirect("/register?error=not_available_useremail");
           }
           else
           {
               CreateAccount($_POST["ClientName"], $_POST["ClientEmail"], $_POST["ClientKey"]);
               HttpClientRedirect("/");
           }
       }
       else
       {
           HttpClientRedirect("/register?error=not_filled_credential");
       }
   
   break;
   default:
   
   // The method used by the client is not handled by our server, for security reasons we dont interpret it
   // We redirect our client to the main page with the 'GET' method
   HttpClientRedirect("/");
   
   break;
   }
   ?>
